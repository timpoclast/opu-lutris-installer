# TODO: check for 'latest' OPU version/link
# TODO: backup+restore saves folder, clear OPU folder, re-install patch to fix. Using input_menu?
# TODO: uninstall behavior?
# lutris:gog:1494370738
name: "Outpost 2: Divided Destiny OPU"
game_slug: outpost-2-divided-destiny-opu
version: Installer
slug: outpost_2_divided_destiny-opu
runner: wine

script:
  requires: outpost_2_divided_destiny
  variables:
    WINEDIR: "drive_c/GOG Games/Outpost 2"
    # VERSION: 1.4.1
    INSTALLER: OPUInstaller-1.4.1.exe
  game:
    args: /OPU
    working_dir: $GAMEDIR/$WINEDIR
    exe: $GAMEDIR/$WINEDIR/Outpost2.exe
  
  wine:
    overrides:
      winmm: n,b
  files:
  - opu_installer: https://outpost2.net/files/op2/game/$INSTALLER
  
  installer:
  - merge:
        src: opu-installer
        dst: $GAMEDIR/$WINEDIR
  - execute:
        file: $GAMEDIR/$WINEDIR/$INSTALLER
